language: ruby
rvm:
- 2.3.3

branches:
  only:
  - master
  - develop

before_install:
- echo $encryption_key | gpg --passphrase-fd 0 .travis/id_rsa.gpg
- chmod 600 .travis/id_rsa
- echo $encryption_key | gpg --passphrase-fd 0 .travis/known_hosts.gpg

script: ".travis/build.sh"

deploy:
- provider: script
  skip_cleanup: true
  script: ".travis/deploy.sh $WEBROOT_DEV"
  on:
    branch: develop
- provider: script
  skip_cleanup: true
  script: ".travis/deploy.sh $WEBROOT"
  on:
    branch: master

sudo: false

env:
  global:
  - JEKYLL_ENV=production
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: dcJT2b0HgsbrGXJEa9B8bng+7LriqRJGajGa5EvL/XbPIPlICHHMwYkX3cowhHII3+uEBG+bpeBw5Vagv5Lwn1rU6ofaL92SzpRQZyyAbrBjsH1Sz8MWbI+I9ZvDolZYcGGe/zqzZaZLnGzm1Fwb4i65F46XYJ2QHN2BB99133KeKVS5VV17ppoInpAxJiso+6Tca0fzZcJ9Dz5Y7X4XQ47Xzl3XvpYpyPXm9UFihS9PTL/aTtuYKOjj10JDK7eifeRm15shUxaXOAj29kE9FgFhExNccJmx8saLdTJO8eQCnOBEH9vBQ6T+bEnM3rIzupl0HewxvZKglf53dTbf0aTiCno9TpbWHICy0bUaJN1noYmidzXIe7VGWu3jM6+3yZgQWCEPhCtTm1WMbmq477wFO0S+FdboEdAbzF6MbEvetjeH+lX2u0oYHUD/xaIGPaE9iHoNcLk52VUzomK5ykbrGX6ueV4Nbhj6Ncd4k6i6H/F/hHRfaq3CUloPimYEUcSzLAbG1a28GXJda30QChfT4RUg9235B/+5qbwsSL2ZrmIPQbKfdiVnZoFcyDE+AiJe+dFAqlyZzB/pwJbHnZXmsIEKv/pRL6b/JYyFA+r5Z9zBexs4fI5pim1QgXpjaaOPEmAwMjx4AigYipAGkTtbY0Bcl/flpAwj8fLWb4g=
  - secure: EvvRsabPEPM5eEerfuGkQdeAN2ithZIiTdTI/ANNnTfUS2edWh5XQPUuR/yHrUg6zfsGXh1c8fjFIoaoydZwt9bz7dJ76OT8xQd60vfDB9mJhQEE91fzFUDEEl8JfiFRFxU1MV1j2S/zRn4iCmhg7zjqlCtm90IYmsm/xaHT2qX23p8E+D631HDszmQQ7C6XOgrMrIaUheFpkQR4dzmvH9QIHqJxGleF3ep5rRN/SKuq17AFbX0nOBLtDcEMnRzFYGXvDNeRGXHkRZmqicXQe0cC9K17Gsr+xNKP9x1xr7olTwVKDKlj+kkrZ5sYys190BAh/fjEpZI130vo1nSuEbJWVCeVOf9rg43C0NxqHb6wFW5u0qmOcQ2KNbYWyfqWP42197d9BaCB85o1q8OVK2WD0FYZhdo5YNIZ+WFcEB5TfP/c65oURoh/w+JzF6doXXEuLKPzr4W7zNI7u+oPotpUU68Jasc5wuj/ozFISrnzIlHxTSzg+3OgosEttQy2hu/zpC4R3sp64STldWpaJtmmWq7okuFPkex5VVzIRq1/F9HyIkxE4DNmD6Cdrxk0Jy0I0ey/pAJ0m5+WJlDq2/5x2Yym6cJdOt8kVikroDBTHVQVWKbfnbO0BzGIoed4WxO66lfRPPGHmc0gWzjzhI7KHlNG71D6zysgSCmmaQQ=
  - secure: P6BqPgHGDcTC/E+W65UXQ5vfMwqiDr1nEqBRgmTda4SlYjeo9K/+nHqf0pbRM6AOVc3SMyWEOMb2IWVfEz7gCSu3u+xWCg5HX/F6p1SlgBqT2lMx7UoXaYiKVDpdQEaojcvY23hTQn+dDliO5sqZFR4IbcewN/lo071tEFOFWPp7I/dEFrZPZXjaXv+Cf5scFTqnMqHkYGFDkJdyW9jT1qWZfyqVWs8A8yJyoA0jWZhJFQrUFju62Or9qFU/St8KinnshhWipZWEd8HmLVVjmG2aintpF5zu7n4w77TbbsEHFX5dNIZzzU8JDGXDPGYDfaYlFfxEjMCCFidNcNf3xYZcFB2GYx6/bHJHAl1zK9HvV87dL7MrcO/eQtrlleGTZCFZYVVS9nB5ZE5aDncAdsr873+y/iYb42yWaVgC4Zxy46qNDsrzDI0KsJoD6M2JhbpaQyKN7Vjgl3l/2ycurUew+0QMOoGg86Hg8Gmqj1HXS6ST5VgR4e0oCNg0iVkx69E+B1ROsFIZ4oCQvQ5vkG+MWXWJKx5b18dYY+PhvQFrc9DI+N9OPPxt1B0Zxeho+HgiU78h5nJqv+lFxeouPKNb4eMfmxwMl6iDC3I0xyPrMu8FNd1haqFuItYXD90+A02LD+5tMkSgwY3jknvaZdLT6Dt+h4D9gJTRXaKki3A=
  - secure: OVU0nxdI9Qj64ePTmp18blwpzDduzK6RPi96fCjZsEcUMH/YMgPuGKA2+ThydMMbaxfG9s0XaJR+PS4RaJA0LKi9gb4w5V5wcB7h6iZypBKO2ktvvj43V2ZWlyXjAzHZ9J9cdDjAx0mYZrqc/fyn2HOEpo07E4Ss6+l8G2ZovvdyXjXKnD/oH3rWqlsQuCGHCvwc/Rw7g3ATRCJWAi/FyDRX0djxN5J7CmbnKLOtcIWW2TbC1YKVD0sWxLXM1tsKOyoarL1YY/pxHJwWSEwSmcfeBlc4SVFK9WT5l8QdBBzt4MS3qhrpLZZUksX8LFn+aabepdtteXSEAhvqSWjFpoWK6irC0XPdznOntzqRlze3vR1E8CuwvsWNB3P2CcUTALku2JNATRuE7a7Fdz+zmgvfE+PB2rMV/PLFKGPpGHkC6d7gZfkugRkLcJp4aosCattsSmc1de/3RiRQK/lph4PK8Dfzdt9hHesvXDJT11UCbhHtrxxzbDUVhLzqxB/Eo5UqelpX+3XkhlUazYjBC8NF19UdB3/QCTY7BC/hS+tw87ZUrBWkO0p7PlplIhnQY+th9tvU0yY/cT/PCg2s7rLPdoNM6NKpvi8SwfIKbE6BWhEP/+LBKTuSW2Epu6jVYNykQslrWLa4FaHaavz4I69ie28x5KK+4kWGcHx4gbg=
  - secure: LsUuqfyEYXXTRVlcVNoXqFF8YgS8k9eorXGCUG+wAI5kf3dcaK55GeCEDEPyvoX5hlZoYIRD0h0/mg2lucXYg9UH/xBhoUKjEPfWm3fCKw/6l1RXtd/RmYr1icCbqtwpZAcTAivzUQvWU6aOqUK4+gtfjIoV47gID0JfJQCjyDsvcOlXkfl2WVBZK60rSomEkD9i26loAdZFqTJJG6uCWyz4NLRnoe13r5TxcUx9rbxHYluDkxMgQ4MnE+vhKRpUZyJaNc8s1tg8y7zpsldm2x8JpyAbrvSU7RmE3mfhJ3N0bhEsZ85EQxzVB/jnQ481aG0okvlzZ2BO8Om0GRKQBFFrCL4FSKQbPi+TZ1P1QQ3lB1z2X85cT+2bdNOoG4NQbNex+wU1HE9upAJjkJNxnpUHCL6QM+LkNwqHQg/y8favgiDkeJfHwIJ1mDC5IQMAal2hTX2VEITEbcWpGjA99BPaY1Ihko6F+/tJEXKpiFXSZ1PbX/20jw/zu1eDoaio9T7cxiOQZybvcMCjgSolpBew6MeqgZUUHY3kTPQz67BVKjTCDsQ32mbjzqwJkZjVG8kigxtptk5+BUeN+YDaEGSJkKtfEGMXDsiCH4TLE9C/gAVBL74Z/IKzs3vIRMnaMzCbt0+SJ0eMmGHTsB/D2FU4EVMDRwNYBRQSpkWA59k=
